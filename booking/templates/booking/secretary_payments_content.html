{% load booking_filters %}

<h1>{{ page_title }}</h1>
<p><strong>تاریخ:</strong> {{ today|to_jalali:"%A, %d %B %Y" }}</p>
<hr>

<div class="split-layout">
    <div class="expense-form-container">
        <h3>ثبت هزینه/پرداخت جدید</h3>
        <form id="expense-form" method="post" action="{% url 'booking:secretary_payments' date=today|date:'Y-m-d' %}">
            {% csrf_token %}
            {{ expense_form.as_p }}
            <button type="submit" class="submit-btn">ثبت</button>
        </form>
    </div>
    <div class="expense-list-container">
        <h3>لیست هزینه‌ها و پرداخت‌های امروز</h3>
        <table id="expenses-table" class="report-table">
            <thead>
                <tr>
                    <th>شرح</th>
                    <th style="text-align: center;">مبلغ (تومان)</th>
                    <th style="text-align: left;">عملیات</th>
                </tr>
            </thead>
            <tbody>
                {% for expense in daily_expenses %}
                <tr>
                    <td>{{ expense.description }}</td>
                    <td class="amount {% if expense.amount > 0 %}positive{% else %}negative{% endif %}" style="text-align: center;">
                        {{ expense.amount|intcomma }}
                    </td>
                    <td style="text-align: left;">
                        <a href="{% url 'booking:edit_expense' pk=expense.pk %}" class="btn btn-sm btn-info">ویرایش</a>
                        <a href="{% url 'booking:delete_expense' pk=expense.pk %}" class="btn btn-sm btn-danger">حذف</a>
                    </td>
                </tr>
                {% empty %}
                    <tr id="no-expense-row">
                        <td colspan="2">موردی برای نمایش وجود ندارد.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
