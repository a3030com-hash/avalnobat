{% extends "booking/base.html" %}

{% block title %}ورود بیمار{% endblock %}

{% block content %}
<div class="form-container">
    <h2>ورود به حساب کاربری</h2>
    <p>لطفا برای ورود یا ثبت نام شماره موبایل خود را وارد کنید.</p>

    {% if error %}
        <p class="error-list">{{ error }}</p>
    {% endif %}
    {% if messages %}
        {% for message in messages %}
             <p class="error-list">{{ message }}</p>
        {% endfor %}
    {% endif %}

    <form method="post" action="{% url 'booking:patient_login' %}">
        {% csrf_token %}
        <div class="form-group">
            <label for="mobile_number">شماره موبایل</label>
            <input type="text" id="mobile_number" name="mobile_number" required placeholder="مثال: 09123456789">
        </div>
        <button type="submit" class="btn-submit btn-block">ارسال کد تایید</button>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // When the user lands on the login page, it's often after logging out.
        // Clear any stored mobile number to ensure a clean login flow.
        localStorage.removeItem('patientMobileNumber');
    });
</script>
{% endblock %}
