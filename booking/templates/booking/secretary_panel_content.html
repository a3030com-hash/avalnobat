{% load booking_filters %}

<div id="dynamic-content" class="panel-container" data-current-date="{{ today|date:"Y-m-d" }}">
    <a href="{% url 'booking:daily_patients' %}"> &larr; بازگشت به لیست روزانه</a>
    <div style="position: relative;">
        <h2 class="elegant-title">{{ page_title }}</h2>
        <a href="{% url 'booking:doctor_list' %}" class="home-icon-link" title="صفحه اصلی">
            <i class="fas fa-home"></i>
        </a>
    </div>
    <div class="date-navigation local-date-nav" style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 1rem;">
        <button id="prev-day-btn" title="روز قبل" class="btn-date-nav">
            <i class="fas fa-chevron-right"></i>
        </button>
        <span id="date-display" style="font-weight: bold; font-size: 1.2rem; color: var(--primary-color);">{{ today|to_jalali:"%A, %d %B %Y" }}</span>
        <button id="next-day-btn" title="روز بعد" class="btn-date-nav">
            <i class="fas fa-chevron-left"></i>
        </button>
    </div>
    <hr>
    <div class="calendar-grid" style="display: flex; flex-wrap: wrap; gap: 10px;"> <!-- استفاده از flex برای چینش افقی -->
        {% for day in future_days %}
            <a href="{% url 'booking:manage_day' day.date|to_jalali:'%Y-%m-%d' %}" class="day-cell available" style="background: linear-gradient(to top, #f8d7da {{ day.booked_percentage }}%, white {{ day.booked_percentage }}%); border: 2px solid #007bff; border-radius: 5px; padding: 20px; text-align: center; flex: 1 1 150px; min-width: 150px;"> <!-- استفاده از flex برای تنظیم اندازه باکس -->
                <span class="day-name">{{ day.date|to_persian_weekday }}</span><br>
                <span class="jalali-date" data-date="{{ day.date|to_jalali_js }}">{{ day.date|to_jalali:"%d %B" }}</span>
            </a>
        {% endfor %}
    </div>
</div>